import"./chunk-YR6A7VV2.js";import"./chunk-TDENHI5R.js";import{a as H}from"./chunk-RVMZQ23V.js";import"./chunk-ACNLDH3S.js";import"./chunk-FMV3DWDN.js";import"./chunk-WND7HVWL.js";import"./chunk-KL7HTKAB.js";import"./chunk-HC6MZPB3.js";import"./chunk-JKUOXI3A.js";import"./chunk-426OJ4HC.js";import"./chunk-B24TMA6E.js";import"./chunk-OHRAIMKX.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-NCPUF6OX.js";import"./chunk-MCRJI3T3.js";import"./chunk-KHGZ5KYX.js";import"./chunk-QXZDNAG7.js";import{$a as k,A as f,B as b,Ba as O,C as n,D as o,E as i,I as h,J as x,K as s,R as a,S as _,Sa as I,T as C,Za as w,ab as y,bb as E,ca as P,ea as v,fb as S,gb as T,l as d,m as g,s as l,t as p,v as u,y as m,za as M}from"./chunk-A7TVLPBO.js";import"./chunk-4H3EC2BX.js";import"./chunk-7KGURMOZ.js";import"./chunk-WAPQ3BUF.js";import"./chunk-3RVCS4YC.js";import"./chunk-ZNWVC66N.js";import"./chunk-G3CV3VGG.js";import"./chunk-LBGEUR6J.js";import"./chunk-HAXAEEDB.js";import"./chunk-3SG6N7GV.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import"./chunk-JHI3MBHO.js";function V(r,j){if(r&1){let e=h();n(0,"div",5),i(1,"br")(2,"br"),n(3,"h3"),a(4),o(),i(5,"br")(6,"br"),n(7,"div",6)(8,"ion-item",7)(9,"ion-label"),a(10),o()()(),i(11,"br")(12,"br"),n(13,"div",8)(14,"div",9),x("click",function(){d(e);let c=s();return g(c.toggleAspersor())}),n(15,"div",10),a(16,"ON"),o(),i(17,"div",11),n(18,"div",12),a(19,"OFF"),o()()(),i(20,"br")(21,"br"),n(22,"ion-button",13),x("click",function(){d(e);let c=s();return g(c.irATab2())}),a(23," Programar aspersor "),o(),i(24,"br")(25,"br"),o()}if(r&2){let e=s();l(4),_(e.aspersores[e.selectedIndex].nombre||"Seleccione un aspersor"),l(6),C("Humedad: ",e.aspersores[e.selectedIndex].humedad,"%"),l(3),b("on",e.aspersores[e.selectedIndex].encendido)("off",!e.aspersores[e.selectedIndex].encendido)}}var B=(()=>{class r{constructor(e,t){this.navCtrl=e,this.authService=t,this.aspersores=[{nombre:"Aspersor 1",humedad:0,encendido:!1}],this.selectedIndex=0}ngOnInit(){this.obtenerEstadoValvula(),this.obtenerHumedad(),this.recargarHumedadPeriodicamente()}obtenerEstadoValvula(){this.authService.getEstadoValvula().subscribe(e=>{this.selectedIndex!==null&&(this.aspersores[this.selectedIndex].encendido=e.estado)},e=>{console.error("Error obteniendo el estado de la v\xE1lvula:",e)})}obtenerHumedad(){this.authService.getHumedad().subscribe(e=>{this.selectedIndex!==null&&(this.aspersores[this.selectedIndex].humedad=e.humedad)},e=>{console.error("Error obteniendo la humedad:",e)})}recargarHumedadPeriodicamente(){setInterval(()=>{this.obtenerHumedad()},5e3)}toggleAspersor(){if(this.selectedIndex!==null){let e=!this.aspersores[this.selectedIndex].encendido;this.aspersores[this.selectedIndex].encendido=e,console.log(`Aspersor ${e?"encendido":"apagado"}`),this.authService.controlValvula(e).subscribe(t=>{console.log("Estado actualizado en la base de datos:",t)},t=>{console.error("Error al actualizar el estado:",t)})}}irATab2(){if(this.selectedIndex!==null){let e=Number(this.aspersores[this.selectedIndex].humedad);if(isNaN(e)||e<0){console.warn("Humedad inv\xE1lida, ajuste el valor.");return}let t={queryParams:{humedad:e}};this.navCtrl.navigateForward("/tabs/tab2",t)}}static{this.\u0275fac=function(t){return new(t||r)(p(O),p(H))}}static{this.\u0275cmp=u({type:r,selectors:[["app-tab1"]],decls:12,vars:1,consts:[[1,"ion-text-center"],[1,"container"],[1,"top-section"],["src","/assets/icon/icono.png","alt","Logo","width","70px"],["class","info-section",4,"ngIf"],[1,"info-section"],[1,"data-container"],[1,"label"],[1,"toggle-container"],[1,"toggle-button",3,"click"],[1,"toggle-text","on"],[1,"toggle-circle"],[1,"toggle-text","off"],[1,"btn",3,"click"]],template:function(t,c){t&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),a(3,"HidroVerde"),o()()(),n(4,"ion-content")(5,"div",1)(6,"div",2),i(7,"br")(8,"img",3)(9,"br")(10,"br"),o(),m(11,V,26,6,"div",4),o()()),t&2&&(l(11),f("ngIf",c.selectedIndex!==null))},dependencies:[E,y,v,P,k,T,S,w,I,M],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #4CAF50;--color: white;text-align:center}ion-content[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;--background: #C8E6C9}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;max-width:900px;margin:0 auto}h3[_ngcontent-%COMP%]{color:#fff}.top-section[_ngcontent-%COMP%]{margin-top:80px}.info-section[_ngcontent-%COMP%]{margin-bottom:20px}.top-section[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]{width:90%;padding:15px;text-align:center;box-sizing:border-box;flex:1}.top-section[_ngcontent-%COMP%]{border-radius:15px 15px 0 0}.info-section[_ngcontent-%COMP%]{border-radius:0 0 15px 15px}.top-section[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:column;align-items:center}.info-section[_ngcontent-%COMP%]{background:#159167;display:flex;flex-direction:column;justify-content:space-between}.phone-icon[_ngcontent-%COMP%]{font-size:40px;color:#fff}.sprinkler-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:20px}.sprinkler-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{border:2px solid black;border-radius:5px;width:200px;max-width:auto;height:50px;font-size:14px;text-align:center;--background: #39532e;--color: white}.sprinkler-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #C6D982;--color: black;border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:10px}.data-row[_ngcontent-%COMP%]{margin-left:50px;margin-right:50px;display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:#fff;border-radius:10px;border:1px solid black}.data-label[_ngcontent-%COMP%]{font-weight:700;text-align:left;flex:1;border:none}.data-value[_ngcontent-%COMP%]{text-align:right;flex:1}.toggle-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.toggle-button[_ngcontent-%COMP%]{width:70px;height:30px;background:red;border-radius:15px;display:flex;align-items:center;justify-content:space-between;padding:0 10px;cursor:pointer;transition:background .3s ease-in-out;position:relative;font-size:14px;font-weight:700;color:#fff}.toggle-circle[_ngcontent-%COMP%]{width:25px;height:25px;background:#fff;border-radius:50%;position:absolute;transition:left .3s ease-in-out}.toggle-container.on[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{background:#26f326}.toggle-container.on[_ngcontent-%COMP%]   .toggle-circle[_ngcontent-%COMP%]{left:40px}.toggle-container.off[_ngcontent-%COMP%]   .toggle-circle[_ngcontent-%COMP%]{left:5px}.toggle-text[_ngcontent-%COMP%]{font-weight:700;transition:opacity .3s ease-in-out}.toggle-container.on[_ngcontent-%COMP%]   .toggle-text.off[_ngcontent-%COMP%], .toggle-container.off[_ngcontent-%COMP%]   .toggle-text.on[_ngcontent-%COMP%]{opacity:0}.btn[_ngcontent-%COMP%]{padding:5px;--background: #C6D982;color:#000;min-width:100px;margin-left:50px;margin-right:50px}.btn[_ngcontent-%COMP%]:hover{--background: white;color:#000}.label[_ngcontent-%COMP%]{border-radius:5px;text-align:center;width:50%;margin:0 auto}"]})}}return r})();export{B as Tab1Page};
