import{a as M}from"./chunk-RVMZQ23V.js";import{$a as E,A as x,C as r,D as t,R as n,S as b,T as s,Ya as f,Za as C,_a as v,ba as h,c,cb as O,e as p,ea as u,fb as _,gb as P,s as i,t as m,v as l,y as g}from"./chunk-A7TVLPBO.js";import"./chunk-4H3EC2BX.js";import"./chunk-7KGURMOZ.js";import"./chunk-WAPQ3BUF.js";import"./chunk-3RVCS4YC.js";import"./chunk-ZNWVC66N.js";import"./chunk-G3CV3VGG.js";import"./chunk-LBGEUR6J.js";import"./chunk-HAXAEEDB.js";import"./chunk-3SG6N7GV.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import"./chunk-JHI3MBHO.js";function S(a,I){if(a&1&&(r(0,"ion-row")(1,"ion-col",4)(2,"div",5)(3,"h3"),n(4),t(),r(5,"p")(6,"strong"),n(7,"Humedad:"),t(),n(8),t(),r(9,"p")(10,"strong"),n(11,"Abrir:"),t(),n(12),t(),r(13,"p")(14,"strong"),n(15,"Cerrar:"),t(),n(16),t(),r(17,"p")(18,"strong"),n(19,"D\xEDas:"),t(),n(20),t(),r(21,"p")(22,"strong"),n(23,"Aspersor:"),t(),n(24),t()()()()),a&2){let e=I.$implicit;i(4),b(e.nombre),i(4),s(" ",e.humedad,"%"),i(4),s(" ",e.abrir,""),i(4),s(" ",e.cerrar,""),i(4),s(" ",e.dias.join(", ")||"No programado",""),i(4),s(" ",e.encendido,"")}}var k=(()=>{class a{constructor(e){this.authService=e,this.aspersores=[]}ngOnInit(){this.cargarDatos(),this.subscription=p(1e4).subscribe(()=>this.cargarDatos())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cargarDatos(){console.log("Obteniendo datos del servidor..."),c({humedad:this.authService.getHumedad(),programacion:this.authService.getUltimaProgramacionRiego(),estadoValvula:this.authService.getEstadoValvula()}).subscribe(({humedad:e,programacion:o,estadoValvula:d})=>{console.log("Datos recibidos:",{humedad:e,programacion:o,estadoValvula:d}),this.aspersores=[{nombre:"Aspersor 1",humedad:e?.humedad??"N/A",abrir:o?.abrir??"No programado",cerrar:o?.cerrar??"No programado",dias:o?.dias??["No programado"],encendido:d?.estado??!1}]},e=>{console.error("Error cargando datos:",e)})}static{this.\u0275fac=function(o){return new(o||a)(m(M))}}static{this.\u0275cmp=l({type:a,selectors:[["app-tab3"]],decls:12,vars:1,consts:[[1,"ion-text-center"],[1,"dashboard"],["size","12",1,"ion-text-center"],[4,"ngFor","ngForOf"],["size","12"],[1,"aspersor-card"]],template:function(o,d){o&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),n(3,"Dashboard"),t()()(),r(4,"ion-content",1)(5,"ion-grid")(6,"ion-row")(7,"ion-col",2)(8,"h2"),n(9,"Estado General"),t()()(),g(10,S,25,6,"ion-row",3),t()(),n(11,`
div`)),o&2&&(i(10),x("ngForOf",d.aspersores))},dependencies:[u,h,E,P,_,C,v,O,f],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #4CAF50}.dashboard[_ngcontent-%COMP%]{--background: #C8E6C9;padding:15px;display:flex;justify-content:center;align-items:center;min-height:100vh}ion-title[_ngcontent-%COMP%]{color:#fff}h2[_ngcontent-%COMP%]{color:#000;text-align:center;margin-top:40px}ion-grid[_ngcontent-%COMP%]{width:100%;max-width:900px}.aspersor-card[_ngcontent-%COMP%]{margin-top:70px;background:#fff;padding:15px;border-radius:10px;box-shadow:2px 2px 10px #0000001a;margin-bottom:15px;text-align:center;border-left:5px solid #4CAF50}.aspersor-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#159167;font-size:1.2rem;margin-bottom:8px}.aspersor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2c3e50;font-size:1rem;margin:5px 0}ion-button[_ngcontent-%COMP%]{margin-top:10px;--background: #4CAF50;--color: white;border-radius:5px;font-weight:700;text-transform:uppercase}ion-button[_ngcontent-%COMP%]:hover{--background: #388E3C}@media (max-width: 768px){.aspersor-card[_ngcontent-%COMP%]{padding:10px}h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}}return a})();export{k as Tab3Page};
